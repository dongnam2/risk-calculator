# 3분할 리스크 계산기 (3-STEP Risk Calculator)

트레이딩용 포지션 사이즈를 자동으로 계산해주는 웹 애플리케이션 및 텔레그램 봇입니다.

## 기능

- ✅ 1~3개의 진입가를 기반으로 포지션 계산
- ✅ 손절가 기반 리스크 관리 (시드의 2% 고정)
- ✅ 레버리지 100배 고정
- ✅ 회차별 진입 수량 및 증거금 계산
- ✅ 웹 인터페이스 + 텔레그램 봇 지원

## 웹 버전 사용

`index.html` 파일을 브라우저에서 열면 바로 사용할 수 있습니다.

### 설정값 (고정)
- **시드**: 2000 USDT
- **레버리지**: 100배
- **리스크**: 2%

## 텔레그램 봇 설정

### 1. BotFather에서 봇 생성

1. 텔레그램에서 [@BotFather](https://t.me/BotFather) 검색
2. `/newbot` 명령어 입력
3. 봇 이름과 사용자명 설정
4. 생성된 **봇 토큰** 저장

### 2. 봇 서버 설치

```bash
# 의존성 설치
npm install

# 또는
yarn install
```

### 3. 환경 변수 설정

`.env` 파일을 생성하고 봇 토큰을 입력하세요:

```bash
cp .env.example .env
```

`.env` 파일을 열어서 토큰을 입력:

```
TELEGRAM_BOT_TOKEN=your_bot_token_here
```

### 4. 봇 실행

```bash
# 프로덕션 모드
npm start

# 개발 모드 (자동 재시작)
npm run dev
```

## 텔레그램 봇 사용법

### 명령어 방식

봇에게 다음과 같이 메시지를 보내세요:

#### 1개 진입가
```
/calc e1:0.5 stop:0.52
```

#### 2개 진입가
```
/calc e1:0.5 e2:0.48 stop:0.52
```

#### 3개 진입가
```
/calc e1:0.5 e2:0.48 e3:0.46 stop:0.52
```

### 간편 입력 방식

숫자를 공백으로 구분해서 입력하면 **마지막 숫자가 자동으로 손절가**로 인식됩니다:

```
0.5 0.48 0.46 0.52
```

이렇게 입력하면:
- E1: 0.5
- E2: 0.48
- E3: 0.46
- Stop: 0.52

로 자동 인식됩니다!

### 기타 명령어

- `/start` - 봇 시작 및 사용법 안내
- `/help` - 도움말 보기

## 계산 예시

### 입력
```
/calc e1:0.5 e2:0.48 e3:0.46 stop:0.52
```

### 출력
```
🧮 3STEP POSITION 계산 결과

📊 기본 정보
• 시드: 2000 USDT
• 레버리지: 100x
• 리스크(2%): 40 USDT

💰 진입 정보
E1: 0.5
E2: 0.48
E3: 0.46
• 손절가: 0.52
• 평균 진입가: 0.48

📈 포지션 요약
• 총 코인 수량: 1000
• 총 포지션 사이즈: 480 USDT
• 총 증거금: 4.8 USDT

🔄 3회 분할 진입 (1회당)
• 코인 수량: 333.33
• 포지션 사이즈: 160 USDT
• 증거금: 1.6 USDT
```

## 프로젝트 구조

```
risk-calculator/
├── index.html          # 웹 버전
├── bot.js              # 텔레그램 봇 메인
├── calculator.js       # 계산 로직
├── package.json        # 의존성 관리
├── .env.example        # 환경 변수 예시
├── .gitignore          # Git 무시 파일
└── README.md           # 문서
```

## 기술 스택

- **웹**: HTML, CSS, JavaScript
- **봇**: Node.js, node-telegram-bot-api
- **환경 변수**: dotenv

## 주의사항

⚠️ 50~100배 고배율 사용 시 슬리피지에 주의하세요.

⚠️ 계산된 수량은 손절 시 시드의 2% 손실을 보장합니다.

⚠️ 이 도구는 교육 목적으로 제공되며, 실제 트레이딩 시 발생하는 손실에 대한 책임은 사용자에게 있습니다.

## 라이선스

MIT License

## 문의

이슈가 있거나 개선 사항이 있다면 GitHub Issues를 이용해주세요.
